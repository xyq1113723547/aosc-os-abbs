<h1 id="logging">Logging</h1>
<p>Logging is controlled by the <code>--debug</code> (or <code>-d</code>) option.</p>
<details>
<summary>
Examples
</summary>
<p>Enable <code>geometry</code> debugging with a client:</p>
<pre class="shell"><code>xpra attach -d geometry</code></pre>
<hr />
<p>Start a seamless server with <code>focus</code> debugging enabled:</p>
<pre class="shell"><code>xpra start -d focus --start=xterm</code></pre>
</details>
<h2 id="logging-categories">Logging Categories</h2>
Use the special category value <code>all</code> to enable all logging. (this will be very verbose and should be avoided)<br />
You can also prefix a logging category with a dash “<code>-</code>” to disable debug logging for it.
<details>
<summary>
example
</summary>
<p>To log everything except the <code>window</code> and <code>focus</code> categories:</p>
<pre class="shell"><code>xpra start :10 -d all,-window,-focus</code></pre>
</details>
<hr />
Each logging category can also be enabled using environment variables.<br />
This can be useful if you cannot modify the command line, or if the logging should happen very early on, or if you aren’t calling the code from its normal wrappers.
<details>
<summary>
example using an environment variable
</summary>
<p>to enable “geometry” debugging with the <code>attach</code> subcommand use:</p>
<pre class="shell"><code>XPRA_GEOMETRY_DEBUG=1 xpra attach</code></pre>
</details>
<hr />
The full list of categories can be shown using <code>xpra -d help</code>, to see this list now, click on:
<details>
<summary>
complete list of categories
</summary>
<table>
<thead>
<tr class="header">
<th>Area</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Client:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>client</td>
<td>all client code</td>
</tr>
<tr class="odd">
<td>paint</td>
<td>client window paint code</td>
</tr>
<tr class="even">
<td>draw</td>
<td>client draw packets processing</td>
</tr>
<tr class="odd">
<td>cairo</td>
<td>calls to the cairo drawing library</td>
</tr>
<tr class="even">
<td>opengl</td>
<td><a href="./Client-OpenGL.html">OpenGL rendering</a></td>
</tr>
<tr class="odd">
<td>info</td>
<td><code>About</code> and <code>Session info</code> dialogs</td>
</tr>
<tr class="even">
<td>launcher</td>
<td>client launcher program</td>
</tr>
<tr class="odd">
<td><strong>General:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>clipboard</td>
<td>all <a href="../Features/Clipboard.html">clipboard</a> operations</td>
</tr>
<tr class="odd">
<td>notify</td>
<td><a href="../Features/Notifications.html">notifications forwarding</a></td>
</tr>
<tr class="even">
<td>tray</td>
<td><a href="../Features/System-Tray.html">system tray forwarding</a></td>
</tr>
<tr class="odd">
<td>printing</td>
<td><a href="../Features/Printing.html">printer forwarding</a></td>
</tr>
<tr class="even">
<td>file</td>
<td><a href="../Features/File-Transfers.html">file transfers</a></td>
</tr>
<tr class="odd">
<td>keyboard</td>
<td><a href="../Features/Keyboard.html">keyboard</a> mapping and key event handling</td>
</tr>
<tr class="even">
<td>screen</td>
<td>screen and workarea dimensions</td>
</tr>
<tr class="odd">
<td>fps</td>
<td>Frames per second</td>
</tr>
<tr class="even">
<td>xsettings</td>
<td>XSettings synchronization</td>
</tr>
<tr class="odd">
<td>dbus</td>
<td>DBUS calls</td>
</tr>
<tr class="even">
<td>rpc</td>
<td>Remote Procedure Calls</td>
</tr>
<tr class="odd">
<td>menu</td>
<td>Menus</td>
</tr>
<tr class="even">
<td>events</td>
<td>System and window events</td>
</tr>
<tr class="odd">
<td><strong>Window:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>window</td>
<td>all window code</td>
</tr>
<tr class="odd">
<td>damage</td>
<td>X11 repaint events</td>
</tr>
<tr class="even">
<td>geometry</td>
<td>window geometry</td>
</tr>
<tr class="odd">
<td>shape</td>
<td>window shape forwarding (<code>XShape</code>)</td>
</tr>
<tr class="even">
<td>focus</td>
<td>window focus</td>
</tr>
<tr class="odd">
<td>workspace</td>
<td>window workspace synchronization</td>
</tr>
<tr class="even">
<td>metadata</td>
<td>window metadata</td>
</tr>
<tr class="odd">
<td>alpha</td>
<td>window Alpha channel (transparency)</td>
</tr>
<tr class="even">
<td>state</td>
<td>window state changes</td>
</tr>
<tr class="odd">
<td>icon</td>
<td>window icons</td>
</tr>
<tr class="even">
<td>frame</td>
<td>window frame</td>
</tr>
<tr class="odd">
<td>grab</td>
<td>window grabs (both keyboard and mouse)</td>
</tr>
<tr class="even">
<td>dragndrop</td>
<td>window drag-n-drop events</td>
</tr>
<tr class="odd">
<td>filters</td>
<td>window filters</td>
</tr>
<tr class="even">
<td><strong><a href="./Encodings.html">Encoding</a>:</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>codec</td>
<td>all codecs</td>
</tr>
<tr class="even">
<td>loader</td>
<td>codec loader</td>
</tr>
<tr class="odd">
<td>video</td>
<td>video encoding and decoding</td>
</tr>
<tr class="even">
<td>score</td>
<td>video pipeline scoring and selection</td>
</tr>
<tr class="odd">
<td>encoding</td>
<td>encoding selection and compression</td>
</tr>
<tr class="even">
<td>scaling</td>
<td>picture scaling</td>
</tr>
<tr class="odd">
<td>scroll</td>
<td>scrolling detection and compression</td>
</tr>
<tr class="even">
<td>subregion</td>
<td>video subregion processing</td>
</tr>
<tr class="odd">
<td>regiondetect</td>
<td>video region detection</td>
</tr>
<tr class="even">
<td>regionrefresh</td>
<td>video region refresh</td>
</tr>
<tr class="odd">
<td>refresh</td>
<td>refresh of lossy screen updates</td>
</tr>
<tr class="even">
<td>compress</td>
<td>pixel compression</td>
</tr>
<tr class="odd">
<td><strong><a href="./Encodings.html">Codec</a>:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>csc</td>
<td>colourspace conversion codecs</td>
</tr>
<tr class="odd">
<td>cuda</td>
<td>CUDA device access (nvenc)</td>
</tr>
<tr class="even">
<td>cython</td>
<td>Cython CSC module</td>
</tr>
<tr class="odd">
<td>swscale</td>
<td>swscale CSC module</td>
</tr>
<tr class="even">
<td>libyuv</td>
<td>libyuv CSC module</td>
</tr>
<tr class="odd">
<td>decoder</td>
<td>all decoders</td>
</tr>
<tr class="even">
<td>encoder</td>
<td>all encoders</td>
</tr>
<tr class="odd">
<td>avcodec</td>
<td>avcodec decoder</td>
</tr>
<tr class="even">
<td>libav</td>
<td>libav common code (used by swscale, avcodec and ffmpeg)</td>
</tr>
<tr class="odd">
<td>ffmpeg</td>
<td>ffmpeg encoder</td>
</tr>
<tr class="even">
<td>pillow</td>
<td>pillow encoder and decoder</td>
</tr>
<tr class="odd">
<td>jpeg</td>
<td>JPEG codec</td>
</tr>
<tr class="even">
<td>vpx</td>
<td>libvpx encoder and decoder</td>
</tr>
<tr class="odd">
<td>nvenc</td>
<td>nvenc hardware encoder</td>
</tr>
<tr class="even">
<td>nvfbc</td>
<td>nfbc screen capture</td>
</tr>
<tr class="odd">
<td>x264</td>
<td>libx264 encoder</td>
</tr>
<tr class="even">
<td>x265</td>
<td>libx265 encoder</td>
</tr>
<tr class="odd">
<td>webp</td>
<td>libwebp encoder and decoder</td>
</tr>
<tr class="even">
<td>webcam</td>
<td>webcam access</td>
</tr>
<tr class="odd">
<td><strong>Pointer:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>mouse</td>
<td>mouse motion</td>
</tr>
<tr class="odd">
<td>cursor</td>
<td>mouse cursor shape</td>
</tr>
<tr class="even">
<td><strong>Misc:</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>gtk</td>
<td>all GTK code: bindings, client, etc</td>
</tr>
<tr class="even">
<td>util</td>
<td>all utility functions</td>
</tr>
<tr class="odd">
<td>gobject</td>
<td>command line clients</td>
</tr>
<tr class="even">
<td>test</td>
<td>test code</td>
</tr>
<tr class="odd">
<td>verbose</td>
<td>very verbose flag</td>
</tr>
<tr class="even">
<td><strong><a href="../Network/index.html">Network</a>:</strong></td>
<td></td>
</tr>
<tr class="odd">
<td>network</td>
<td>all network code</td>
</tr>
<tr class="even">
<td>bandwidth</td>
<td>bandwidth detection and management</td>
</tr>
<tr class="odd">
<td>ssh</td>
<td><a href="../Network/SSH.html">SSH</a> connections</td>
</tr>
<tr class="even">
<td>ssl</td>
<td><a href="../Network/SSL.html">SSL</a> connections</td>
</tr>
<tr class="odd">
<td>http</td>
<td>HTTP requests</td>
</tr>
<tr class="even">
<td>rfb</td>
<td>RFB Protocol</td>
</tr>
<tr class="odd">
<td>mmap</td>
<td>mmap transfers</td>
</tr>
<tr class="even">
<td>protocol</td>
<td>packet input and output</td>
</tr>
<tr class="odd">
<td>websocket</td>
<td>WebSocket layer</td>
</tr>
<tr class="even">
<td>named-pipe</td>
<td>Named pipe</td>
</tr>
<tr class="odd">
<td>udp</td>
<td>UDP</td>
</tr>
<tr class="even">
<td>crypto</td>
<td><a href="../Network/Encryption.html">encryption</a></td>
</tr>
<tr class="odd">
<td>auth</td>
<td><a href="./Authentication.html">authentication</a></td>
</tr>
<tr class="even">
<td>upnp</td>
<td>UPnP</td>
</tr>
<tr class="odd">
<td><strong>Server:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>server</td>
<td>all server code</td>
</tr>
<tr class="odd">
<td>proxy</td>
<td><a href="./Proxy-Server.html">proxy server</a></td>
</tr>
<tr class="even">
<td>shadow</td>
<td><a href="./Shadow-Server.html">shadow server</a></td>
</tr>
<tr class="odd">
<td>command</td>
<td>server control channel</td>
</tr>
<tr class="even">
<td>timeout</td>
<td>server timeouts</td>
</tr>
<tr class="odd">
<td>exec</td>
<td>executing commands</td>
</tr>
<tr class="even">
<td>mdns</td>
<td><a href="../Network/Multicast-DNS.html">mDNS</a> session publishing</td>
</tr>
<tr class="odd">
<td>stats</td>
<td>server statistics</td>
</tr>
<tr class="even">
<td>xshm</td>
<td>XShm pixel capture</td>
</tr>
<tr class="odd">
<td><strong>Audio:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>sound</td>
<td>all audio</td>
</tr>
<tr class="odd">
<td>gstreamer</td>
<td>GStreamer internal messages</td>
</tr>
<tr class="even">
<td>av-sync</td>
<td>Audio-video sync</td>
</tr>
<tr class="odd">
<td><strong>X11:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>x11</td>
<td>all X11 code</td>
</tr>
<tr class="odd">
<td>xinput</td>
<td>XInput bindings</td>
</tr>
<tr class="even">
<td>bindings</td>
<td>X11 Cython bindings</td>
</tr>
<tr class="odd">
<td>core</td>
<td>X11 core bindings</td>
</tr>
<tr class="even">
<td>randr</td>
<td>X11 RandR bindings</td>
</tr>
<tr class="odd">
<td>ximage</td>
<td>X11 XImage bindings</td>
</tr>
<tr class="even">
<td>error</td>
<td>X11 errors</td>
</tr>
<tr class="odd">
<td><strong>Platform:</strong></td>
<td></td>
</tr>
<tr class="even">
<td>platform</td>
<td>all platform support code</td>
</tr>
<tr class="odd">
<td>import</td>
<td>platform support imports</td>
</tr>
<tr class="even">
<td>osx</td>
<td>MacOS platform support</td>
</tr>
<tr class="odd">
<td>win32</td>
<td>Microsoft Windows platform support</td>
</tr>
<tr class="even">
<td>posix</td>
<td>Posix platform</td>
</tr>
</tbody>
</table>
</details>
<hr />
<h2 id="runtime-changes">Runtime changes</h2>
Logging settings can be modified at runtime:
<details>
<summary>
via the control subcommand
</summary>
<p>Using the <code>control</code> channel:</p>
<pre class="shell"><code>xpra control :DISPLAY debug enable CATEGORY</code></pre>
<p>This can be used to contol both servers and clients (using the client’s socket path: #2406).</p>
<p>The server can also forward debug control commands to the clients connected to it using <code>client debug</code>:</p>
<pre class="shell"><code>xpra control :DISPLAY client debug enable geometry</code></pre>
<hr />
<p>You can enable many categories at once:</p>
<pre class="shell"><code>xpra control :2 debug enable window geometry screen</code></pre>
<p>Or only enable loggers that match multiple categories with <code>+</code>:</p>
<pre class="shell"><code>xpra control :2  debug disable focus+grab</code></pre>
</details>
<details>
<summary>
the server’s dbus interface
</summary>
The debug control commands are also available trough the server’s dbus interface, see <a href="https://github.com/Xpra-org/xpra/issues/904">#904</a>.
</details>
<hr />
<h2 id="extra-detailed-logging">Extra Detailed Logging</h2>
<p>Some subsystems require special environment variables to enable logging, this is done to minimize the cost of logging in performance critical paths.<br />
In particular the X11 bindings, as those can process thousands of events per second.</p>
<p>Log all X11 events:</p>
<pre class="shell"><code>XPRA_X11_DEBUG_EVENTS=&quot;*&quot; xpra start :10</code></pre>
<p>or just specific events:</p>
<pre class="shell"><code>XPRA_X11_DEBUG_EVENTS=&quot;EnterNotify,CreateNotify&quot; xpra start :10</code></pre>
